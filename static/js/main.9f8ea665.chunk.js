(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{68:function(e,t,a){e.exports=a(81)},73:function(e,t,a){},74:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(6),c=a.n(r),s=(a(73),a(74),a(131)),i=function(e){var t=e.title;return o.a.createElement("header",{className:"header"},o.a.createElement("h1",{className:"header-title"},t))},l=a(46),u=a(35),h=a(36),m=a(61),k=a(63),f=a(52),d=function(){function e(){Object(u.a)(this,e),this.api="https://reactnd-books-api.udacity.com",this.token="",this.headers={},this.token=localStorage.token,this.token||(this.token=localStorage.token=Math.random().toString(36).substr(-8)),this.headers={Accept:"application/json",Authorization:this.token}}return Object(h.a)(e,[{key:"get",value:function(e){var t=this.api,a=this.headers;return fetch("".concat(t,"/books/").concat(e),a).then((function(e){return e.json()})).then((function(e){return e.book}))}},{key:"getAll",value:function(){var e=this.api,t=this.headers;return fetch("".concat(e,"/books"),{headers:t}).then((function(e){return e.json()})).then((function(e){return e.books}))}},{key:"update",value:function(e,t){var a=this.api,n=this.headers;return fetch("".concat(a,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},n,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}},{key:"search",value:function(e){var t=this.api,a=this.headers;return fetch("".concat(t,"/search"),{method:"POST",headers:Object(f.a)({},a,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}}]),e}(),v=a(18),b=function(e){var t=e.bookShelves,a=e.moveBook;return Object.keys(t).filter((function(e){return!t[e].hidden})).map((function(e){var n=t[e],r=n.title,c=n.books;return o.a.createElement(o.a.Fragment,{key:e},o.a.createElement(U,{title:r,books:c,shelves:t,moveBook:function(e,t){return a(e,t)}}),o.a.createElement(v.c,{to:"/search",className:"searchButton"},o.a.createElement("i",{title:"Search",className:"fa fa-search"})))}))},p=function(e){var t=e.books,a=e.bookShelves,n=e.search,r=e.moveBook;return o.a.createElement("div",{className:"searchView"},o.a.createElement("input",{className:"searchbar",onChange:function(e){return n(e.target.value)},placeholder:"Search by title or author"}),o.a.createElement(U,{key:"Search",title:"Search Results",books:t,shelves:a,moveBook:function(e,t){return r(e,t)}}),o.a.createElement(v.c,{to:"/",className:"backButton",onClick:function(){return n("")}},o.a.createElement("i",{title:"Back",className:"fa fa-arrow-left"})))},y=a(22),g=function(e){Object(k.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={books:[],searchBooks:[],bookShelves:{currentlyReading:{books:[],title:"Currently Reading"},read:{books:[],title:"Read"},wantToRead:{books:[],title:"Want to Read"},none:{books:[],title:"None",hidden:!0}}},n.bookService=new d,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.loadBooks()}},{key:"loadBooks",value:function(){var e=this,t=this.state,a=t.bookShelves,n=t.searchBooks;this.bookService.getAll().then((function(t){t&&t.length>0?Object.keys(a).map((function(e){return a[e].books=t.filter((function(t){return t.shelf===e}))})):(t=[],Object.keys(a).map((function(e){return a[e].books=[]}))),e.setState((function(){return{books:t,searchBooks:e.addBookShelfInfo(t,n),bookShelves:a}}))}))}},{key:"moveBook",value:function(e,t){var a=this;e&&t&&this.bookService.update(e,t).then((function(){return a.loadBooks()}))}},{key:"addBookShelfInfo",value:function(e,t){var a,n=Object(l.a)(t);try{for(n.s();!(a=n.n()).done;){a.value.shelf="none"}}catch(h){n.e(h)}finally{n.f()}var o,r=Object(l.a)(e);try{for(r.s();!(o=r.n()).done;){var c,s=o.value,i=Object(l.a)(t);try{for(i.s();!(c=i.n()).done;){var u=c.value;if(s.id===u.id){u.shelf=s.shelf;break}}}catch(h){i.e(h)}finally{i.f()}}}catch(h){r.e(h)}finally{r.f()}return t}},{key:"searchBook",value:function(e){var t=this;e?this.bookService.search(e).then((function(e){var a=t.state.books;t.setState((function(){return{searchBooks:e&&e.length?t.addBookShelfInfo(a,e):[]}}))})):this.setState((function(){return{searchBooks:[]}}))}},{key:"render",value:function(){var e=this;return o.a.createElement("main",{className:"dashboard"},o.a.createElement(v.b,{basename:"/"},o.a.createElement(y.a,{exact:!0,path:"/search",render:function(){var t=e.state,a=t.searchBooks,n=t.bookShelves;return o.a.createElement(p,{books:a,bookShelves:n,search:e.searchBook.bind(e),moveBook:e.moveBook.bind(e)})}}),o.a.createElement(y.a,{exact:!0,path:"/",render:function(){var t=e.state.bookShelves;return o.a.createElement(b,{bookShelves:t,moveBook:e.moveBook.bind(e)})}})))}}]),a}(n.Component),E=a(120),B=function(){return o.a.createElement("div",null,o.a.createElement("footer",{className:"main-footer"},o.a.createElement("span",{className:"copy-right"},"copyright \xa9 2020 all rights reserved by",o.a.createElement(E.a,{href:"https://www.seanroshan.com",target:"_blank",className:"copy-right-link"},"Sean Roshan"))))},S=a(62),j=a(123),N=a(124),O=a(125),w=a(127),x=a(84),T=a(59),C=a.n(T),R=a(132),A=a(126),I=a(134),M=Object(j.a)((function(){return{root:{maxWidth:400,maxHeight:600}}})),J=function(e){var t=o.a.useState(null),a=Object(S.a)(t,2),n=a[0],r=a[1],c=Boolean(n),s=M(),i=e.book,l=e.moveBook,u=e.shelves,h=i.title,m=i.authors,k=i&&i.imageLinks&&i.imageLinks.thumbnail?i.imageLinks.thumbnail:"https://www.southtabor.com/newsite/wp-content/themes/consultix/images/no-image-found-360x250.png",f="By "+(m&&m.length?m.join(", "):"unknown author"),d=Object.keys(u).filter((function(e){return e!==i.shelf})).map((function(e){return{key:e,title:u[e].title}})),v=function(){r(null)};return o.a.createElement(N.a,{className:s.root},o.a.createElement(O.a,{action:o.a.createElement(x.a,{"aria-label":"actions",onClick:function(e){r(e.currentTarget)},disabled:!d.length},o.a.createElement(C.a,null)),title:h,titleTypographyProps:{variant:"h6"},subheader:f,subheaderTypographyProps:{variant:"subtitle2"}}),o.a.createElement(R.a,{id:"fade-menu",anchorEl:n,keepMounted:!0,open:c,onClose:v,TransitionComponent:A.a},o.a.createElement(I.a,{key:"moveTo",selected:!0,disabled:!0},"Move to"),d.map((function(e){return o.a.createElement(I.a,{key:e.key,onClick:function(){return function(e){l(e),v()}(e.key)}},e.title)}))),o.a.createElement(w.a,{className:"book-image",component:"img",src:k,title:h}))},L=a(133),P=a(128),W=a(129),H=a(34),q=a(60),z=a.n(q),D=a(130),F=Object(j.a)((function(e){return{root:{width:"100%",marginBottom:"50px"},expanded:{paddingTop:"20px",minHeight:"600px"}}})),U=function(e){var t=F(),a=e.title,n=e.books,r=e.moveBook,c=e.shelves;return o.a.createElement("div",{className:t.root},o.a.createElement(L.a,{defaultExpanded:!0},o.a.createElement(P.a,{expandIcon:a?o.a.createElement(z.a,null):"","aria-controls":a,id:a+"-shelf"},o.a.createElement(H.a,{variant:"h4"},a)),o.a.createElement(H.a,{variant:"h6",style:{textAlign:"center"},hidden:n&&n.length,elevation:3},"NO CONTENT"),o.a.createElement(W.a,{className:t.expanded},o.a.createElement(D.a,{className:"item",container:!0,spacing:4},n.map((function(e){return o.a.createElement(D.a,{key:e.id,item:!0,xs:12,sm:6,md:4,lg:3,xl:4},o.a.createElement(J,{shelves:c,book:e,moveBook:function(t){return r(e,t)}}))}))))))};var V=function(){return o.a.createElement(s.a,{className:"app",style:{paddingLeft:0,paddingRight:0}},o.a.createElement(i,{title:"MyReads"}),o.a.createElement(g,null),o.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(v.a,null,o.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.9f8ea665.chunk.js.map